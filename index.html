<!-- missions.html - 模块代码 -->
<style>
    /* 样式基本保持不变，为返回按钮和头部布局做了微调 */
    .mission-module-container { display: flex; flex-direction: column; height: 100%; width: 100%; }
    .mission-module-header {
        padding: 15px; background-color: #100000; border-bottom: 2px solid #8B0000; flex-shrink: 0;
        display: flex; align-items: center; justify-content: space-between; /* 改为flex布局 */
    }
    .mission-module-header h1 {
        color: #DC143C; font-size: 1.2em; letter-spacing: 2px; text-shadow: 0 0 8px rgba(220, 20, 60, 0.7);
        animation: flicker 2s linear infinite; margin: 0; /* 移除默认margin */
    }
    .back-button {
        background: none; border: 1px solid #8B0000; color: #DC143C; font-size: 1.2em;
        cursor: pointer; padding: 2px 8px; border-radius: 4px; transition: all 0.3s;
    }
    .back-button:hover { background: #8B0000; color: #fff; box-shadow: 0 0 8px #8B0000; }
    .mission-list { flex-grow: 1; overflow-y: auto; padding: 20px 10px; }
    .mission-list::-webkit-scrollbar { width: 4px; }
    .mission-list::-webkit-scrollbar-track { background: transparent; }
    .mission-list::-webkit-scrollbar-thumb { background: #8B0000; }
    .mission-card { background: rgba(26, 26, 26, 0.6); border: 1px solid #444; border-left: 3px solid #8B0000; border-radius: 8px; margin-bottom: 15px; padding: 15px; transition: all 0.3s ease; }
    .mission-card:hover { border-color: #B22222; box-shadow: 0 0 15px rgba(178, 34, 34, 0.3); transform: translateY(-3px); }
    .mission-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 12px; }
    .mission-title { color: #e0e0e0; font-size: 1.1em; font-weight: bold; }
    .mission-reward { color: #CD5C5C; font-size: 0.9em; font-weight: bold; }
    .mission-description { color: #999; font-size: 0.9em; line-height: 1.6; margin-bottom: 15px; }
    .details-button { display: block; width: 100%; background: transparent; border: 2px solid #8B0000; color: #B22222; padding: 8px; cursor: pointer; font-size: 0.9em; letter-spacing: 1px; text-align: center; border-radius: 6px; transition: all 0.3s ease; }
    .details-button:hover { background: #8B0000; color: #eee; box-shadow: 0 0 10px rgba(139, 0, 0, 0.5); }
    @keyframes flicker { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
</style>

<div class="mission-module-container">
    <div class="mission-module-header">
        <!-- 新增的返回按钮 -->
        <button class="back-button" onclick="showMainMenu()">↩</button>
        <h1>ERIS // MISSION BOARD</h1>
        <div style="width: 30px;"></div> <!-- 占位符，让标题居中 -->
    </div>

    <div class="mission-list" id="mission-board">
        <!-- 随机任务将通过脚本动态插入到这里 -->
    </div>
</div>

<script>
    (function() {
        // --- 随机任务数据池 ---
        const firstWords = ["幽灵", "蝰蛇", "深渊", "夜枭", "黑日", "零号", "量子", "猩红", "雷霆", "暗影"];
        const secondWords = ["之刺", "协议", "迷雾", "风暴", "之眼", "光谱", "信标", "回响", "之刃", "之手"];
        const locations = ["新东京市", "轨道空间站「苍穹」", "九龙城寨遗址", "西伯利亚冻土实验室", "摩天楼A-1", "深海数据 जेल", "霓虹之心赌场", "废弃的地铁网络"];
        const categories = ["数据窃取", "人员清除", "护送任务", "破坏行动", "物品回收", "情报侦察"];
        const descriptions = ["目标网络防御薄弱，但物理安保严密。", "高价值目标，建议使用非致命手段。", "需在规定时间内完成撤离。", "行动将引发连锁反应，做好应对准备。", "目标物品极为脆弱，注意保护。", "行动区域有第三方势力活动。"];

        // --- 辅助函数：从数组中随机选择一项 ---
        const getRandomItem = (arr) => arr[Math.floor(Math.random() * arr.length)];

        // --- 主函数：生成并渲染8个随机任务 ---
        function renderRandomMissions() {
            const missionBoard = document.getElementById('mission-board');
            if (!missionBoard) return;

            let missionsHtml = '';
            for (let i = 0; i < 8; i++) {
                // 生成一个独特的任务
                const missionName = `${getRandomItem(firstWords)}${getRandomItem(secondWords)}`;
                const reward = (Math.floor(Math.random() * 90) + 10) * 1000;
                const location = getRandomItem(locations);
                const category = getRandomItem(categories);
                const description = getRandomItem(descriptions);
                const missionId = `${missionName.replace(/ /g, '_')}_${Date.now() + i}`; // 创建一个伪唯一ID
                const detailsUrl = `https://my-pages-2md.pages.dev/mission_details_${missionId}.html`; // 假设的详情页URL

                // 创建任务卡片的HTML模板
                missionsHtml += `
                    <div class="mission-card">
                        <div class="mission-header">
                            <span class="mission-title">${missionName}</span>
                            <span class="mission-reward">赏金: ¥${reward.toLocaleString()}</span>
                        </div>
                        <p class="mission-description">
                            <b>地点:</b> ${location}<br>
                            <b>类别:</b> ${category}<br>
                            <b>简报:</b> ${description}
                        </p>
                        <!-- 关键：onclick直接调用主容器的loadContent函数 -->
                        <button class="details-button" onclick="loadContent('${detailsUrl}')">
                            查看详细
                        </button>
                    </div>
                `;
            }

            // 一次性将所有生成的HTML插入到页面，性能更优
            missionBoard.innerHTML = missionsHtml;
        }

        // --- 初始化 ---
        renderRandomMissions();

    })(); // 使用IIFE（立即执行函数表达式）避免污染全局作用域
</script>
